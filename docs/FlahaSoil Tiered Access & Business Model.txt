graph TD
    %% User Entry Points
    Visitor[ğŸŒ Website Visitor] --> Landing[ğŸ  Landing Page]
    
    %% Plan Selection
    Landing --> PlanChoice{Choose Plan}
    
    %% Free Tier Path
    PlanChoice -->|Free| FreeTier[ğŸ†“ FREE TIER<br/>$0/month]
    FreeTier --> FreeFeatures[ğŸ“‹ Free Features<br/>â€¢ 50 analyses/month<br/>â€¢ Basic soil calculations<br/>â€¢ USDA triangle visualization<br/>â€¢ Web interface access<br/>âŒ No reports<br/>âŒ No print functionality<br/>âŒ No analysis history<br/>âŒ No export capabilities]
    
    %% Professional Tier Path
    PlanChoice -->|Professional| ProTier[ğŸ’¼ PROFESSIONAL TIER<br/>$29/month]
    ProTier --> ProFeatures[ğŸ“‹ Professional Features<br/>â€¢ Unlimited analyses<br/>â€¢ Full 24-equation system<br/>â€¢ Confidence intervals RÂ²<br/>â€¢ PDF report generation<br/>â€¢ Print functionality<br/>â€¢ Analysis history<br/>â€¢ Export capabilities<br/>â€¢ Advanced visualizations<br/>â€¢ Moisture-tension curves<br/>â€¢ 3D soil profiles<br/>â€¢ Comparative analysis<br/>â€¢ Real-time adjustments]
    
    %% Enterprise Tier Path
    PlanChoice -->|Enterprise| EntTier[ğŸ¢ ENTERPRISE TIER<br/>$199/month]
    EntTier --> EntFeatures[ğŸ“‹ Enterprise Features<br/>â€¢ All Professional features<br/>â€¢ Custom report branding<br/>â€¢ API access & webhooks<br/>â€¢ Gravel effects calculations<br/>â€¢ Salinity effects calculations<br/>â€¢ Regional data integration<br/>â€¢ Priority support<br/>â€¢ Custom integrations<br/>â€¢ Bulk processing<br/>â€¢ White-label options]
    
    %% Demo Access
    Landing --> DemoAccess[ğŸ§ª Try Demo<br/>No Registration Required]
    DemoAccess --> DemoFeatures[ğŸ“‹ Demo Features<br/>â€¢ Basic calculations only<br/>â€¢ Limited to demo data<br/>â€¢ No data storage<br/>â€¢ No reports<br/>â€¢ Upgrade prompts<br/>â€¢ Sample visualizations]
    
    %% Feature Access Control
    subgraph "Feature Access Matrix"
        BasicCalc[ğŸ§® Basic Soil Calculations]
        AdvCalc[âš¡ Advanced 24-Equation System]
        Reports[ğŸ“„ PDF Reports]
        History[ğŸ“š Analysis History]
        Export[ğŸ“¤ Data Export]
        API[ğŸ”— API Access]
        CustomBrand[ğŸ¨ Custom Branding]
        RegionalData[ğŸŒ Regional Data]
        Support[ğŸ§ Support Level]
    end
    
    %% Access Permissions
    FreeFeatures --> BasicCalc
    FreeFeatures -.->|âŒ| AdvCalc
    FreeFeatures -.->|âŒ| Reports
    FreeFeatures -.->|âŒ| History
    FreeFeatures -.->|âŒ| Export
    FreeFeatures -.->|âŒ| API
    FreeFeatures -.->|âŒ| CustomBrand
    FreeFeatures -.->|âŒ| RegionalData
    FreeFeatures --> Support
    
    ProFeatures --> BasicCalc
    ProFeatures --> AdvCalc
    ProFeatures --> Reports
    ProFeatures --> History
    ProFeatures --> Export
    ProFeatures -.->|âŒ| API
    ProFeatures -.->|âŒ| CustomBrand
    ProFeatures --> RegionalData
    ProFeatures --> Support
    
    EntFeatures --> BasicCalc
    EntFeatures --> AdvCalc
    EntFeatures --> Reports
    EntFeatures --> History
    EntFeatures --> Export
    EntFeatures --> API
    EntFeatures --> CustomBrand
    EntFeatures --> RegionalData
    EntFeatures --> Support
    
    DemoFeatures --> BasicCalc
    DemoFeatures -.->|âŒ| AdvCalc
    DemoFeatures -.->|âŒ| Reports
    DemoFeatures -.->|âŒ| History
    DemoFeatures -.->|âŒ| Export
    DemoFeatures -.->|âŒ| API
    DemoFeatures -.->|âŒ| CustomBrand
    DemoFeatures -.->|âŒ| RegionalData
    DemoFeatures -.->|âŒ| Support
    
    %% Usage Limits & Monitoring
    subgraph "Usage Control System"
        UsageMonitor[ğŸ“Š Usage Monitoring]
        RateLimit[â±ï¸ Rate Limiting]
        TierGating[ğŸšª Feature Gating]
        UpgradePrompts[ğŸ’° Upgrade Prompts]
    end
    
    %% Usage Limits by Tier
    FreeTier --> UsageLimit1[ğŸ“Š 50 analyses/month]
    ProTier --> UsageLimit2[ğŸ“Š Unlimited analyses]
    EntTier --> UsageLimit3[ğŸ“Š Unlimited + API quotas]
    DemoAccess --> UsageLimit4[ğŸ“Š Demo only - no storage]
    
    %% Upgrade Paths
    FreeFeatures --> UpgradeToProPrompt[ğŸ’° Upgrade to Professional<br/>When limits reached]
    ProFeatures --> UpgradeToEntPrompt[ğŸ’° Upgrade to Enterprise<br/>For API access]
    DemoFeatures --> UpgradeToAnyPrompt[ğŸ’° Register for Full Access<br/>After demo usage]
    
    UpgradeToProPrompt --> ProTier
    UpgradeToEntPrompt --> EntTier
    UpgradeToAnyPrompt --> PlanChoice
    
    %% Revenue Streams
    subgraph "Revenue Model"
        Freemium[ğŸ†“ Freemium Model<br/>Lead Generation]
        ProSubs[ğŸ’¼ Professional Subscriptions<br/>$29/month Ã— users]
        EntSubs[ğŸ¢ Enterprise Subscriptions<br/>$199/month Ã— organizations]
        APIUsage[ğŸ”— API Usage Fees<br/>Enterprise add-ons]
        CustomDev[ğŸ› ï¸ Custom Development<br/>Enterprise services]
    end
    
    FreeTier --> Freemium
    ProTier --> ProSubs
    EntTier --> EntSubs
    EntTier --> APIUsage
    EntTier --> CustomDev
    
    %% IP Protection Strategy
    subgraph "IP Protection"
        BackendOnly[ğŸ”’ Backend-Only Calculations<br/>24-Equation System Protected]
        APIAuth[ğŸ” API Authentication<br/>JWT + Tier Validation]
        ServerSide[ğŸ–¥ï¸ Server-Side Processing<br/>No Client-Side Algorithms]
        TierValidation[âœ… Real-time Tier Validation<br/>Feature Access Control]
    end
    
    %% All tiers connect to IP protection
    FreeFeatures --> BackendOnly
    ProFeatures --> BackendOnly
    EntFeatures --> BackendOnly
    DemoFeatures --> BackendOnly
    
    BackendOnly --> APIAuth
    APIAuth --> ServerSide
    ServerSide --> TierValidation
    
    %% Styling
    classDef free fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    classDef professional fill:#e3f2fd,stroke:#2196f3,stroke-width:2px
    classDef enterprise fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
    classDef demo fill:#ffebee,stroke:#f44336,stroke-width:2px
    classDef feature fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    classDef revenue fill:#e0f2f1,stroke:#00695c,stroke-width:2px
    classDef protection fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef upgrade fill:#fff8e1,stroke:#f57f17,stroke-width:2px
    classDef limit fill:#f1f8e9,stroke:#33691e,stroke-width:2px
    
    class FreeTier,FreeFeatures,UsageLimit1,Freemium free
    class ProTier,ProFeatures,UsageLimit2,ProSubs professional
    class EntTier,EntFeatures,UsageLimit3,EntSubs,APIUsage,CustomDev enterprise
    class DemoAccess,DemoFeatures,UsageLimit4 demo
    class BasicCalc,AdvCalc,Reports,History,Export,API,CustomBrand,RegionalData,Support feature
    class ProSubs,EntSubs,APIUsage,CustomDev,Freemium revenue
    class BackendOnly,APIAuth,ServerSide,TierValidation protection
    class UpgradeToProPrompt,UpgradeToEntPrompt,UpgradeToAnyPrompt,UpgradePrompts upgrade
    class UsageMonitor,RateLimit,TierGating limit